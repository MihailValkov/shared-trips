(self.webpackChunkshared_trips=self.webpackChunkshared_trips||[]).push([[940],{940:(t,n,e)=>{"use strict";e.r(n),e.d(n,{TripModule:()=>Nt});var i=e(8583),o=e(3342),r=e(3065);const a=(0,r.PH)("[TRIP CREATE] Loading",(0,r.Ky)()),c=(0,r.PH)("[TRIP CREATE] Error Message",(0,r.Ky)()),s=(0,r.PH)("[TRIP EDIT] Loading",(0,r.Ky)()),d=(0,r.PH)("[TRIP EDIT] Error Message",(0,r.Ky)()),g=(0,r.PH)("[TRIP DETAIL] Set Trip",(0,r.Ky)()),p=(0,r.PH)("[TRIP DETAIL] Set Trip Info",(0,r.Ky)()),l=(0,r.PH)("[TRIP DETAIL] Loading",(0,r.Ky)()),u=(0,r.PH)("[TRIP DETAIL] Error Message",(0,r.Ky)()),f=(0,r.PH)("[TRIP LIST] Loading",(0,r.Ky)()),m=(0,r.PH)("[TRIP LIST] Error Message",(0,r.Ky)()),h=(0,r.PH)("[TRIP LIST] Set Trips",(0,r.Ky)()),_=(0,r.PH)("[TRIP LIST] Set Trips Count",(0,r.Ky)()),b=(0,r.PH)("[TRIP LIST] Set Current Page",(0,r.Ky)());var Z=e(7716),x=e(1841);let P=(()=>{class t{constructor(t,n){this.http=t,this.store=n,this.trips$=this.store.select(t=>t.trip.list.trips),this.count$=this.store.select(t=>t.trip.list.count),this.trip$=this.store.select(t=>t.trip.detail.trip)}loadTrips(t){return this.http.get("/trip/list",{params:t}).pipe((0,o.b)(({trips:t,count:n})=>{this.store.dispatch(h({trips:t})),this.store.dispatch(_({count:n}))}))}loadTrip(t){return this.http.get(`/trip/item/${t}`).pipe((0,o.b)(({trip:t})=>this.store.dispatch(g({trip:t}))))}createTrip(t){return this.http.post("/trip/create",t)}editTrip(t,n){return this.http.post(`/trip/edit/${n}`,t).pipe((0,o.b)(({trip:t})=>this.store.dispatch(g({trip:t}))))}joinTrip(t){return this.http.get(`/trip/join/${t}`).pipe((0,o.b)(({trip:t})=>this.store.dispatch(g({trip:t}))))}deleteTrip(t){return this.http.get(`/trip/delete/${t}`)}}return t.\u0275fac=function(n){return new(n||t)(Z.LFG(x.eN),Z.LFG(r.yh))},t.\u0275prov=Z.Yz7({token:t,factory:t.\u0275fac}),t})();var O=e(5406),C=e(5045),M=e(665),v=e(6477),T=e(8494),q=e(235),k=e(9047);function A(t,n){1&t&&Z._UZ(0,"app-loader",37)}function y(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1," * Starting Point should be at least 4 characters long!"),Z.qZA())}function w(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* End Point should be at least 4 characters long!"),Z.qZA())}function U(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Date is required!"),Z.qZA())}function I(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Time is required!"),Z.qZA())}function L(t,n){if(1&t&&(Z.TgZ(0,"div",38),Z._uU(1),Z.ALo(2,"async"),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(1),Z.hij("* ",Z.lcZ(2,1,t.errorMessage$),"")}}function N(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Car Brand should be at least 4 characters long!"),Z.qZA())}function J(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Seats must be a positive number in range 0-4!"),Z.qZA())}function j(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Price must be a positive number in range 1-50!"),Z.qZA())}function Q(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Description should be at least 10 characters long!"),Z.qZA())}let Y=(()=>{class t{constructor(t,n,e,i){this.fb=t,this.tripService=n,this.router=e,this.store=i,this.isLoading$=this.store.select(t=>t.trip.create.isLoading),this.errorMessage$=this.store.select(t=>t.trip.create.errorMessage),this.form=this.fb.group({startPoint:["",[M.kI.required,M.kI.minLength(4)]],endPoint:["",[M.kI.required,M.kI.minLength(4)]],date:["",[M.kI.required]],time:["",[M.kI.required]],carImage:["",[M.kI.required]],carBrand:["",[M.kI.required,M.kI.minLength(4)]],seats:["",[M.kI.required,M.kI.min(0),M.kI.max(4)]],price:["",[M.kI.required,M.kI.min(1),M.kI.max(50)]],description:["",[M.kI.required,M.kI.minLength(10)]],smoking:[""],eating:[""],drinking:[""],climatic:[""]})}validateField(t){var n,e;return(null===(n=this.form.get(t))||void 0===n?void 0:n.touched)&&(null===(e=this.form.get(t))||void 0===e?void 0:e.errors)}getImageUrl(t){if(this.store.dispatch(c({message:""})),null==t?void 0:t.message)return this.store.dispatch(c({message:null==t?void 0:t.message})),void this.form.controls.carImage.setErrors({invalid:!0});this.form.controls.carImage.setValue(t.imageUrl)}submitHandler(){this.store.dispatch(c({message:""})),this.store.dispatch(a({isLoading:!0})),this.tripService.createTrip(this.form.value).subscribe(({trip:t,user:n})=>{this.store.dispatch(a({isLoading:!1})),this.store.dispatch((0,v.Nq)({user:n})),this.router.navigate([`/trip/detail/${t._id}`])},t=>{this.store.dispatch(a({isLoading:!1})),this.store.dispatch(c({message:t.message}))})}}return t.\u0275fac=function(n){return new(n||t)(Z.Y36(M.qu),Z.Y36(P),Z.Y36(O.F0),Z.Y36(r.yh))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-create"]],decls:81,vars:31,consts:[[3,"errorMessage"],["class","main-view",4,"ngIf"],["id","offer-trip-page"],[1,"container","offer-trip"],[3,"formGroup","ngSubmit"],[1,"offer-label"],[1,"form-group","offer-input"],[1,"inline"],["for","startPoint"],[1,"fas","fa-map-marker-alt"],["type","text","formControlName","startPoint","id","startPoint","placeholder","Sofia",1,"form-control-2"],["class","error",4,"ngIf"],["for","endPoint"],["type","text","formControlName","endPoint","id","endPoint","placeholder","Svilengrad",1,"form-control-2"],["for","date"],[1,"far","fa-calendar-alt"],["type","date","formControlName","date","name","date","id","date","placeholder","01 July 2021","required","validateField('date')",1,"form-control-2"],["for","time"],[1,"far","fa-clock"],["type","time","formControlName","time","name","time","id","time","placeholder","19:00 PM","required","",1,"form-control-2"],["for","carImage"],[3,"imageUrl"],["for","carBrand"],["type","text","formControlName","carBrand","id","carBrand","placeholder","Dacia Sandero",1,"form-control-2"],["for","seats"],["type","text","formControlName","seats","name","seats","id","seats","placeholder","4",1,"form-control-2"],["for","price"],["type","text","formControlName","price","name","price","id","price","placeholder","25",1,"form-control-2"],[1,"form-group"],["for","description"],["formControlName","description","id","description","placeholder","Information about the trip",1,"form-control"],[1,"form-group","extras"],["type","checkbox","id","smoking","formControlName","smoking",1,"form-control-2"],["type","checkbox","id","eating","formControlName","eating",1,"form-control-2"],["type","checkbox","id","drinking","formControlName","drinking",1,"form-control-2"],["type","checkbox","id","climatic","formControlName","climatic",1,"form-control-2"],[1,"btn","btn-primary",3,"disabled"],[1,"main-view"],[1,"error"]],template:function(t,n){if(1&t&&(Z._UZ(0,"app-error",0),Z.ALo(1,"async"),Z.YNc(2,A,1,0,"app-loader",1),Z.ALo(3,"async"),Z.TgZ(4,"section",2),Z.TgZ(5,"div",3),Z.TgZ(6,"h1"),Z._uU(7,"Offer trip"),Z.qZA(),Z.TgZ(8,"div"),Z.TgZ(9,"form",4),Z.NdJ("ngSubmit",function(){return n.submitHandler()}),Z._UZ(10,"div",5),Z.TgZ(11,"div",6),Z.TgZ(12,"div",7),Z.TgZ(13,"label",8),Z._UZ(14,"i",9),Z._uU(15," Starting Point"),Z.qZA(),Z._UZ(16,"input",10),Z.YNc(17,y,2,0,"div",11),Z.qZA(),Z.TgZ(18,"div",7),Z.TgZ(19,"label",12),Z._UZ(20,"i",9),Z._uU(21," End Point"),Z.qZA(),Z._UZ(22,"input",13),Z.YNc(23,w,2,0,"div",11),Z.qZA(),Z.qZA(),Z.TgZ(24,"div",6),Z.TgZ(25,"div",7),Z.TgZ(26,"label",14),Z._UZ(27,"i",15),Z._uU(28," Date"),Z.qZA(),Z._UZ(29,"input",16),Z.YNc(30,U,2,0,"div",11),Z.qZA(),Z.TgZ(31,"div",7),Z.TgZ(32,"label",17),Z._UZ(33,"i",18),Z._uU(34," Time"),Z.qZA(),Z._UZ(35,"input",19),Z.YNc(36,I,2,0,"div",11),Z.qZA(),Z.qZA(),Z.TgZ(37,"div",6),Z.TgZ(38,"div",7),Z.TgZ(39,"label",20),Z._uU(40,"Car Image"),Z.qZA(),Z.TgZ(41,"app-input",21),Z.NdJ("imageUrl",function(t){return n.getImageUrl(t)}),Z.qZA(),Z.YNc(42,L,3,3,"div",11),Z.qZA(),Z.TgZ(43,"div",7),Z.TgZ(44,"label",22),Z._uU(45,"Car Brand"),Z.qZA(),Z._UZ(46,"input",23),Z.YNc(47,N,2,0,"div",11),Z.qZA(),Z.qZA(),Z.TgZ(48,"div",6),Z.TgZ(49,"div",7),Z.TgZ(50,"label",24),Z._uU(51,"Available Seats"),Z.qZA(),Z._UZ(52,"input",25),Z.YNc(53,J,2,0,"div",11),Z.qZA(),Z.TgZ(54,"div",7),Z.TgZ(55,"label",26),Z._uU(56,"Price"),Z.qZA(),Z._UZ(57,"input",27),Z.YNc(58,j,2,0,"div",11),Z.qZA(),Z.qZA(),Z.TgZ(59,"div",28),Z.TgZ(60,"label",29),Z._uU(61,"Description"),Z.qZA(),Z.TgZ(62,"div",7),Z._UZ(63,"textarea",30),Z.YNc(64,Q,2,0,"div",11),Z.qZA(),Z.qZA(),Z.TgZ(65,"div",31),Z._UZ(66,"input",32),Z._UZ(67,"input",33),Z._UZ(68,"input",34),Z._UZ(69,"input",35),Z.qZA(),Z.TgZ(70,"div",31),Z.TgZ(71,"span"),Z._uU(72,"Smoking"),Z.qZA(),Z.TgZ(73,"span"),Z._uU(74,"Eating"),Z.qZA(),Z.TgZ(75,"span"),Z._uU(76,"Drinking"),Z.qZA(),Z.TgZ(77,"span"),Z._uU(78,"Climatic"),Z.qZA(),Z.qZA(),Z.TgZ(79,"button",36),Z._uU(80,"Submit"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t){let t;Z.Q6J("errorMessage",Z.lcZ(1,27,n.errorMessage$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(3,29,n.isLoading$)),Z.xp6(7),Z.Q6J("formGroup",n.form),Z.xp6(7),Z.ekj("invalid",n.validateField("startPoint")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("startPoint")),Z.xp6(5),Z.ekj("invalid",n.validateField("endPoint")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("endPoint")),Z.xp6(7),Z.Q6J("ngIf",n.validateField("date")),Z.xp6(5),Z.ekj("invalid",n.validateField("time")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("time")),Z.xp6(6),Z.Q6J("ngIf",null==(t=n.form.get("carImage"))||null==t.errors?null:t.errors.invalid),Z.xp6(4),Z.ekj("invalid",n.validateField("carBrand")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("carBrand")),Z.xp6(5),Z.ekj("invalid",n.validateField("seats")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("seats")),Z.xp6(4),Z.ekj("invalid",n.validateField("price")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("price")),Z.xp6(5),Z.ekj("invalid",n.validateField("description")),Z.xp6(1),Z.Q6J("ngIf",n.validateField("description")),Z.xp6(15),Z.Q6J("disabled",n.form.invalid)}},directives:[T.q,i.O5,M._Y,M.JL,M.sg,M.Fj,M.JJ,M.u,M.Q7,q.a,M.Wl,k.R],pipes:[i.Ov],styles:["#offer-trip-page[_ngcontent-%COMP%]{padding:20px}.container[_ngcontent-%COMP%]{width:70%;padding-bottom:1rem!important}.offer-trip[_ngcontent-%COMP%]{background:#665e5e80;padding:20px}.offer-trip[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{text-align:center;padding-bottom:10px;border-bottom:1px solid #b3a0a0}.offer-trip[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{box-shadow:0 0 0 0 #eb4b19,inset 0 0 0 0 #0000}.container[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{text-align:center}.offer-input[_ngcontent-%COMP%]{display:flex;justify-content:space-between}label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:.5rem;font-size:20px}i[_ngcontent-%COMP%]{color:#0578b9}input.form-control[_ngcontent-%COMP%], input.form-control-2[_ngcontent-%COMP%], textarea.form-control[_ngcontent-%COMP%]{background:#00000080;color:#fff;border:none;outline:none}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;border-radius:4px;margin-right:2px;filter:invert(1)}.form-control-2[_ngcontent-%COMP%]{text-align:center;display:block;width:95%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #b3a0a0;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{background:#0009}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.edit[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%], .offer-trip[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{width:100%;height:90px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}textarea[_ngcontent-%COMP%], textarea.form-control[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]:disabled{padding:5px 10px;text-align:center;border-top-left-radius:20px;border-top-right-radius:20px;word-wrap:break-word}.inline[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative;font-size:.95rem}input.form-control-2[_ngcontent-%COMP%], textarea.form-control[_ngcontent-%COMP%]{border:1px solid #b3a0a0}input.invalid[_ngcontent-%COMP%], textarea.invalid[_ngcontent-%COMP%]{border:1px solid #eb4b19}button[_ngcontent-%COMP%]:disabled{background:#00000080;cursor:not-allowed}.extras[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:1rem;color:#fff}INPUT[type=checkbox][_ngcontent-%COMP%]:focus{outline:1px solid #0003}INPUT[type=checkbox][_ngcontent-%COMP%]{border-radius:2px;appearance:none;-webkit-appearance:none;-moz-appearance:none;width:50px;height:50px;cursor:pointer;position:relative;top:5px}INPUT[type=checkbox][_ngcontent-%COMP%]:checked{background-image:url(Checkmark.svg.b05811829509e7f60883.png);background-size:50px}INPUT[type=checkbox][_ngcontent-%COMP%]:checked, input[type=checkbox][_ngcontent-%COMP%]:not(:checked){background-repeat:no-repeat;background-position:50%;border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:not(:checked){background-image:url(not-Checkmark.svg.d40f49a46552019109df.png);background-size:35px}input[type=date][_ngcontent-%COMP%]:invalid::-webkit-datetime-edit, input[type=time][_ngcontent-%COMP%]:invalid::-webkit-datetime-edit{color:gray}@media (max-width:768px){.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;margin-top:20px}.offer-input[_ngcontent-%COMP%]{flex-wrap:wrap}.form-control-2[_ngcontent-%COMP%]{width:100%}.extras[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:1rem}}"]}),t})();var S=e(7341);let F=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-buddy"]],inputs:{buddy:"buddy",type:"type"},decls:8,vars:3,consts:[[1,"icon"],["alt","avatar-img",3,"src"]],template:function(t,n){1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"span",0),Z._UZ(2,"img",1),Z.qZA(),Z.TgZ(3,"h5"),Z.TgZ(4,"span"),Z._uU(5),Z.qZA(),Z.qZA(),Z.TgZ(6,"h5"),Z._uU(7),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(2),Z.Q6J("src",null==n.buddy?null:n.buddy.avatarImg,Z.LSH),Z.xp6(3),Z.Oqu(n.type),Z.xp6(2),Z.Oqu(null==n.buddy?null:n.buddy.email))},styles:[".icon[_ngcontent-%COMP%]{display:block;margin:25px auto 10px;text-align:center;max-width:150px}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:150px;height:150px;border-radius:50%;object-fit:cover;max-width:500px;transition:all .2s ease-in-out}.icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4em}h5[_ngcontent-%COMP%]{font-size:1.25rem;display:block;margin:0 auto 10px;text-align:center;font-weight:400}h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02);cursor:grab;box-shadow:0 -2px 20px -1px #64c3fff5,inset -14px -14px 30px -13px #0000008c}@media only screen and (max-width:768px){.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}}"]}),t})();function $(t,n){1&t&&Z._UZ(0,"app-loader",3)}function z(t,n){1&t&&Z._UZ(0,"app-buddy",30),2&t&&Z.Q6J("buddy",n.$implicit)}function D(t,n){if(1&t&&(Z.TgZ(0,"div",28),Z.YNc(1,z,1,1,"app-buddy",29),Z.qZA()),2&t){const t=Z.oxw().ngIf;Z.xp6(1),Z.Q6J("ngForOf",t.buddies)}}function E(t,n){1&t&&(Z.TgZ(0,"div",28),Z.TgZ(1,"p"),Z._uU(2,"there are no buddies yet..."),Z.qZA(),Z.qZA())}const R=function(t){return["/trip/edit",t]};function H(t,n){if(1&t&&(Z.TgZ(0,"a",37),Z._uU(1,"Edit this trip"),Z.qZA()),2&t){const t=Z.oxw(2).ngIf;Z.Q6J("routerLink",Z.VKq(1,R,t._id))}}function B(t,n){if(1&t){const t=Z.EpF();Z.TgZ(0,"a",38),Z.NdJ("click",function(){Z.CHM(t);const n=Z.oxw(2).ngIf;return Z.oxw().deleteRecord(n._id)}),Z._uU(1,"Delete this trip"),Z.qZA()}}function K(t,n){if(1&t){const t=Z.EpF();Z.TgZ(0,"a",39),Z.NdJ("click",function(){Z.CHM(t);const n=Z.oxw(2).ngIf;return Z.oxw().joinTrip(n._id)}),Z._uU(1),Z.qZA()}if(2&t){const t=Z.oxw(2).ngIf;Z.xp6(1),Z.hij("Join now, [ ",t.seats," ] seats left!")}}function G(t,n){1&t&&(Z.TgZ(0,"span",40),Z._uU(1,"Already joined. Don't be late!"),Z.qZA())}function X(t,n){1&t&&(Z.TgZ(0,"span",41),Z._uU(1,"No seats available! [0]"),Z.qZA())}function V(t,n){if(1&t&&(Z.TgZ(0,"div",31),Z.YNc(1,H,2,3,"a",32),Z.ALo(2,"async"),Z.YNc(3,B,2,0,"a",33),Z.ALo(4,"async"),Z.YNc(5,K,2,1,"a",34),Z.YNc(6,G,2,0,"span",35),Z.YNc(7,X,2,0,"span",36),Z.qZA()),2&t){const t=n.ngIf,e=Z.oxw().ngIf,i=Z.oxw();let o,r;Z.xp6(1),Z.Q6J("ngIf",t.isOwner||"Admin"==(null==(o=Z.lcZ(2,5,i.user$))?null:o.status)),Z.xp6(2),Z.Q6J("ngIf",t.isOwner||"Admin"==(null==(r=Z.lcZ(4,7,i.user$))?null:r.status)),Z.xp6(2),Z.Q6J("ngIf",!t.isOwner&&!t.alreadyJoined&&e.seats>0),Z.xp6(1),Z.Q6J("ngIf",t.alreadyJoined),Z.xp6(1),Z.Q6J("ngIf",0==e.seats&&!t.alreadyJoined&&!t.isOwner)}}function W(t,n){1&t&&Z._UZ(0,"i",42)}function tt(t,n){1&t&&Z._UZ(0,"i",43)}function nt(t,n){1&t&&Z._UZ(0,"i",42)}function et(t,n){1&t&&Z._UZ(0,"i",43)}function it(t,n){1&t&&Z._UZ(0,"i",42)}function ot(t,n){1&t&&Z._UZ(0,"i",43)}function rt(t,n){1&t&&Z._UZ(0,"i",42)}function at(t,n){1&t&&Z._UZ(0,"i",43)}function ct(t,n){if(1&t&&(Z.TgZ(0,"section",4),Z.TgZ(1,"div",5),Z.TgZ(2,"h1"),Z._uU(3,"Details"),Z.qZA(),Z.TgZ(4,"div",6),Z.TgZ(5,"div"),Z.TgZ(6,"span",7),Z._UZ(7,"i",8),Z.qZA(),Z.TgZ(8,"h5"),Z.TgZ(9,"span"),Z._uU(10,"Destination"),Z.qZA(),Z.qZA(),Z.TgZ(11,"h5"),Z._uU(12,"from "),Z.TgZ(13,"span"),Z._uU(14),Z.qZA(),Z._uU(15," to "),Z.TgZ(16,"span"),Z._uU(17),Z.qZA(),Z.qZA(),Z.qZA(),Z._UZ(18,"app-buddy",9),Z.ALo(19,"async"),Z.TgZ(20,"div"),Z.TgZ(21,"span",7),Z._UZ(22,"i",10),Z.qZA(),Z.TgZ(23,"h5"),Z.TgZ(24,"span"),Z._uU(25,"Date and time"),Z.qZA(),Z.qZA(),Z.TgZ(26,"h5"),Z.TgZ(27,"span"),Z._uU(28),Z.qZA(),Z._uU(29," at "),Z.TgZ(30,"span"),Z._uU(31),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z._UZ(32,"p",11),Z.TgZ(33,"div",12),Z.TgZ(34,"h5"),Z.TgZ(35,"span"),Z._uU(36,"Shared trip Buddies"),Z.qZA(),Z.qZA(),Z.YNc(37,D,2,1,"div",13),Z.YNc(38,E,3,0,"div",13),Z.qZA(),Z._UZ(39,"p",11),Z.TgZ(40,"h5",14),Z._uU(41,"Car Brand: "),Z.TgZ(42,"span",15),Z._uU(43),Z.qZA(),Z.qZA(),Z.TgZ(44,"div",16),Z.TgZ(45,"div",17),Z._UZ(46,"img",18),Z.qZA(),Z.TgZ(47,"div",19),Z.TgZ(48,"h5"),Z._uU(49,"Information about the trip"),Z.qZA(),Z.TgZ(50,"textarea",20),Z._uU(51),Z.qZA(),Z.TgZ(52,"h5"),Z._uU(53,"Price: "),Z.TgZ(54,"span",15),Z._uU(55),Z.qZA(),Z._uU(56," BGN"),Z.qZA(),Z.YNc(57,V,8,9,"div",21),Z.ALo(58,"async"),Z.ALo(59,"async"),Z.qZA(),Z.qZA(),Z.TgZ(60,"table"),Z.TgZ(61,"tr"),Z.TgZ(62,"td"),Z._UZ(63,"i",22),Z._uU(64,"Smok\u0435"),Z.qZA(),Z.TgZ(65,"td"),Z.YNc(66,W,1,0,"i",23),Z.YNc(67,tt,1,0,"i",24),Z.qZA(),Z.TgZ(68,"td"),Z._UZ(69,"i",25),Z._uU(70,"Eat"),Z.qZA(),Z.TgZ(71,"td"),Z.YNc(72,nt,1,0,"i",23),Z.YNc(73,et,1,0,"i",24),Z.qZA(),Z._UZ(74,"span"),Z.TgZ(75,"td"),Z._UZ(76,"i",26),Z._uU(77,"Drink"),Z.qZA(),Z.TgZ(78,"td"),Z.YNc(79,it,1,0,"i",23),Z.YNc(80,ot,1,0,"i",24),Z.qZA(),Z.TgZ(81,"td"),Z._UZ(82,"i",27),Z._uU(83,"Climatic"),Z.qZA(),Z.TgZ(84,"td"),Z.YNc(85,rt,1,0,"i",23),Z.YNc(86,at,1,0,"i",24),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t){const t=n.ngIf,e=Z.oxw();Z.xp6(14),Z.Oqu(t.startPoint),Z.xp6(3),Z.Oqu(t.endPoint),Z.xp6(1),Z.Q6J("buddy",Z.lcZ(19,20,e.trip$).creator),Z.xp6(10),Z.Oqu(t.date),Z.xp6(3),Z.Oqu(t.time),Z.xp6(6),Z.Q6J("ngIf",null==t.buddies?null:t.buddies.length),Z.xp6(1),Z.Q6J("ngIf",0==(null==t.buddies?null:t.buddies.length)),Z.xp6(5),Z.Oqu(t.carBrand),Z.xp6(3),Z.Q6J("src",t.carImage,Z.LSH),Z.xp6(5),Z.Oqu(t.description),Z.xp6(4),Z.Oqu(t.price),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(58,22,e.isLogged$)&&Z.lcZ(59,24,e.tripInfo$)),Z.xp6(9),Z.Q6J("ngIf",t.smoking),Z.xp6(1),Z.Q6J("ngIf",!t.smoking),Z.xp6(5),Z.Q6J("ngIf",t.eating),Z.xp6(1),Z.Q6J("ngIf",!t.eating),Z.xp6(6),Z.Q6J("ngIf",t.drinking),Z.xp6(1),Z.Q6J("ngIf",!t.drinking),Z.xp6(5),Z.Q6J("ngIf",t.climatic),Z.xp6(1),Z.Q6J("ngIf",!t.climatic)}}let st=(()=>{class t{constructor(t,n,e,i,o){this.tripService=t,this.authService=n,this.activatedRoute=e,this.router=i,this.store=o,this.isLogged$=this.authService.isLogged$,this.user$=this.authService.user$,this.trip$=this.tripService.trip$,this.isLoading$=this.store.select(t=>t.trip.detail.isLoading),this.errorMessage$=this.store.select(t=>t.trip.detail.errorMessage),this.tripInfo$=this.store.select(t=>t.trip.detail.info),this.tripService.loadTrip(this.activatedRoute.snapshot.params.tripId).subscribe(({info:t})=>{this.store.dispatch(p({info:t})),this.store.dispatch(l({isLoading:!1}))},t=>{this.store.dispatch(l({isLoading:!1})),this.store.dispatch(u({message:t.message}))})}deleteRecord(t){this.store.dispatch(u({message:""})),this.tripService.deleteTrip(t).subscribe(t=>{this.store.dispatch(l({isLoading:!1})),this.router.navigate(["/trip/list"])},t=>{this.store.dispatch(l({isLoading:!1})),this.store.dispatch(u({message:t.error.message}))})}joinTrip(t){this.store.dispatch(u({message:""})),this.tripService.joinTrip(t).subscribe(({info:n})=>{this.store.dispatch(l({isLoading:!1})),this.store.dispatch(p({info:n})),this.router.navigate(["/trip/detail",t])},t=>{this.store.dispatch(l({isLoading:!1})),this.store.dispatch(u({message:t.error.message}))})}}return t.\u0275fac=function(n){return new(n||t)(Z.Y36(P),Z.Y36(S.e),Z.Y36(O.gz),Z.Y36(O.F0),Z.Y36(r.yh))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-detail"]],decls:6,vars:9,consts:[[3,"errorMessage"],["class","main-view",4,"ngIf"],["class","py-5 details","id","trip-details-page",4,"ngIf"],[1,"main-view"],["id","trip-details-page",1,"py-5","details"],[1,"container","trip-details"],[1,"destination"],[1,"icon"],[1,"fas","fa-map-marked-alt"],["type","Driver",3,"buddy"],[1,"fas","fa-calendar-alt"],[1,"line"],[1,"buddies-info"],["class","destination buddies",4,"ngIf"],[1,"brand"],[1,"lead"],[1,"trip-info"],[1,"trip-img"],["alt","car-image",1,"img-fluid","rounded",3,"src"],[1,"trip-desc"],["disabled","",1,"lead"],["class","actions",4,"ngIf"],[1,"fas","fa-smoking"],["class","fas fa-check allow",4,"ngIf"],["class","fas fa-times-circle not-allow",4,"ngIf"],[1,"fas","fa-utensils"],[1,"fas","fa-beer"],[1,"fas","fa-fan"],[1,"destination","buddies"],[3,"buddy",4,"ngFor","ngForOf"],[3,"buddy"],[1,"actions"],["class","btn btn-warning",3,"routerLink",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-join",3,"click",4,"ngIf"],["class","btn btn-info",4,"ngIf"],["class","btn btn-secondary",4,"ngIf"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-join",3,"click"],[1,"btn","btn-info"],[1,"btn","btn-secondary"],[1,"fas","fa-check","allow"],[1,"fas","fa-times-circle","not-allow"]],template:function(t,n){1&t&&(Z._UZ(0,"app-error",0),Z.ALo(1,"async"),Z.YNc(2,$,1,0,"app-loader",1),Z.ALo(3,"async"),Z.YNc(4,ct,87,26,"section",2),Z.ALo(5,"async")),2&t&&(Z.Q6J("errorMessage",Z.lcZ(1,3,n.errorMessage$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(3,5,n.isLoading$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(5,7,n.trip$)))},directives:[T.q,i.O5,k.R,F,i.sg,O.yS],pipes:[i.Ov],styles:["#trip-details-page[_ngcontent-%COMP%]{padding:20px}.trip-details[_ngcontent-%COMP%]{background:#665e5e80}.trip-details[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{text-align:center;padding-bottom:10px;border-bottom:1px solid #b3a0a0}.details[_ngcontent-%COMP%]{color:#fff;border:1px solid #000}.details[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.destination[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:33%}.destination[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){text-align:center}.details[_ngcontent-%COMP%]   .buddies[_ngcontent-%COMP%]{justify-content:space-evenly}.line[_ngcontent-%COMP%]{box-shadow:2px 0 4px 1px #dee2e6,inset -14px -14px 30px -13px #0000008c;border:0;margin-top:15px;margin-bottom:30px}.icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], i.buddies[_ngcontent-%COMP%]{font-size:4em}.fa[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{font-weight:900}.fa[_ngcontent-%COMP%], .far[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{font-family:Font Awesome\\ 5 Free}i[_ngcontent-%COMP%]{color:#0578b9}.details[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;margin:25px auto 10px;text-align:center;max-width:150px}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:150px;height:150px;border-radius:50%;object-fit:cover}.details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:block;margin:0 auto 10px;text-align:center;font-weight:400}h5[_ngcontent-%COMP%]{font-size:1.25rem}.details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.details[_ngcontent-%COMP%]   .buddies-info[_ngcontent-%COMP%]{text-align:center;width:100%}.details[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{text-align:left}.trip-info[_ngcontent-%COMP%]{display:flex;border-radius:5px;align-items:flex-start;margin-top:30px}.trip-img[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:space-between}.trip-info[_ngcontent-%COMP%]   .img-fluid.rounded[_ngcontent-%COMP%]{max-width:500px;transition:all .2s ease-in-out}.trip-info[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]:hover{transform:scale(1.02);cursor:grab}.rounded[_ngcontent-%COMP%]{border-radius:.25rem!important}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:auto}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}.trip-desc[_ngcontent-%COMP%]{width:55%;text-align:center;word-wrap:break-word;padding:1%}.trip-desc[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-size:22px}textarea[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]:disabled{height:170px;padding:5px 10px;text-align:center;border-top-left-radius:20px;border-top-right-radius:20px;word-wrap:break-word;background:#0009;overflow:auto;resize:vertical;margin:0;font-family:inherit;font-size:inherit;line-height:inherit}textarea[_ngcontent-%COMP%]:disabled{width:100%;resize:none;background:#00000080;color:#fff;border:none;outline:none}textarea.lead[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300}.actions[_ngcontent-%COMP%]{margin-top:10px}.btn[_ngcontent-%COMP%]{margin-bottom:10px;margin-right:10px;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;border-color:#ffc107}.btn-join[_ngcontent-%COMP%]{background-color:#118b50;border-color:#118b50}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;border-color:#17a2b8;display:block;width:240px;margin:0 auto 10px}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;background-color:initial;-webkit-text-decoration-skip:objects}table[_ngcontent-%COMP%]{border-collapse:collapse;position:relative;bottom:5px;margin:40px auto 20px;border-radius:20px;box-shadow:1px 0 2px 0,inset -8px -24px 4px -9px #0000008c}td[_ngcontent-%COMP%]{border-right:.5px solid #f1f1f180;padding:.5em;text-align:center}td[_ngcontent-%COMP%]:last-of-type{border:none}i[_ngcontent-%COMP%]{font-size:3em;display:block}i.allow[_ngcontent-%COMP%]{color:#28a745}i.not-allow[_ngcontent-%COMP%]{color:#dc3545}@media only screen and (max-width:768px){.brand[_ngcontent-%COMP%] > span.lead[_ngcontent-%COMP%], .trip-desc[_ngcontent-%COMP%]   span.lead[_ngcontent-%COMP%]{width:100%;word-wrap:break-word}.trip-info[_ngcontent-%COMP%]{display:flex;border-radius:5px;flex-wrap:wrap;align-content:center;justify-content:center}.trip-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{justify-content:space-around!important}.trip-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}.trip-desc[_ngcontent-%COMP%]{margin-top:1rem;width:100%}.details[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%], .trip-desc[_ngcontent-%COMP%]{text-align:center}.details[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.destination[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3em}table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:flex-end;align-content:flex-start}td[_ngcontent-%COMP%]{width:25%}td[_ngcontent-%COMP%]:nth-of-type(2n){padding-bottom:2rem;border-right:0}td[_ngcontent-%COMP%]:nth-of-type(3), td[_ngcontent-%COMP%]:nth-of-type(7){border-left:.5px solid #ada9a98c}table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;height:.5px;background:#ada9a98c}.trip-img[_ngcontent-%COMP%]{width:100%}}@media (min-width:992px){.container[_ngcontent-%COMP%]{max-width:1300px}}"]}),t})();function dt(t,n){1&t&&Z._UZ(0,"app-loader",3)}function gt(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1," * Starting Point should be at least 4 characters long!"),Z.qZA())}function pt(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* End Point should be at least 4 characters long!"),Z.qZA())}function lt(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Date is required!"),Z.qZA())}function ut(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Time is required!"),Z.qZA())}function ft(t,n){if(1&t&&(Z.TgZ(0,"div",38),Z._uU(1),Z.ALo(2,"async"),Z.qZA()),2&t){const t=Z.oxw(2);Z.xp6(1),Z.hij("* ",Z.lcZ(2,1,t.errorMessage$),"")}}function mt(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Car Brand should be at least 4 characters long!"),Z.qZA())}function ht(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Seats must be a positive number in range 0-4!"),Z.qZA())}function _t(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Price must be a positive number in range 1-50!"),Z.qZA())}function bt(t,n){1&t&&(Z.TgZ(0,"div",38),Z._uU(1,"* Description should be at least 10 characters long!"),Z.qZA())}function Zt(t,n){if(1&t){const t=Z.EpF();Z.TgZ(0,"section",4),Z.TgZ(1,"div",5),Z.TgZ(2,"h1"),Z._uU(3,"Edit trip"),Z.qZA(),Z.TgZ(4,"div"),Z.TgZ(5,"form",6),Z.NdJ("ngSubmit",function(){const n=Z.CHM(t).ngIf;return Z.oxw().submitHandler(n._id)}),Z.TgZ(6,"div",7),Z.TgZ(7,"div",8),Z.TgZ(8,"label",9),Z._UZ(9,"i",10),Z._uU(10," Starting Point"),Z.qZA(),Z._UZ(11,"input",11),Z.YNc(12,gt,2,0,"div",12),Z.qZA(),Z.TgZ(13,"div",8),Z.TgZ(14,"label",13),Z._UZ(15,"i",10),Z._uU(16," End Point"),Z.qZA(),Z._UZ(17,"input",14),Z.YNc(18,pt,2,0,"div",12),Z.qZA(),Z.qZA(),Z.TgZ(19,"div",7),Z.TgZ(20,"div",8),Z.TgZ(21,"label",15),Z._UZ(22,"i",16),Z._uU(23," Date"),Z.qZA(),Z._UZ(24,"input",17),Z.YNc(25,lt,2,0,"div",12),Z.qZA(),Z.TgZ(26,"div",8),Z.TgZ(27,"label",18),Z._UZ(28,"i",19),Z._uU(29," Time"),Z.qZA(),Z._UZ(30,"input",20),Z.YNc(31,ut,2,0,"div",12),Z.qZA(),Z.qZA(),Z.TgZ(32,"div",7),Z.TgZ(33,"div",8),Z.TgZ(34,"label",21),Z._uU(35,"Car Image"),Z.qZA(),Z.TgZ(36,"app-input",22),Z.NdJ("imageUrl",function(n){return Z.CHM(t),Z.oxw().getImageUrl(n)}),Z.qZA(),Z.YNc(37,ft,3,3,"div",12),Z.qZA(),Z.TgZ(38,"div",8),Z.TgZ(39,"label",23),Z._uU(40,"Car Brand"),Z.qZA(),Z._UZ(41,"input",24),Z.YNc(42,mt,2,0,"div",12),Z.qZA(),Z.qZA(),Z.TgZ(43,"div",7),Z.TgZ(44,"div",8),Z.TgZ(45,"label",25),Z._uU(46,"Available Seats"),Z.qZA(),Z._UZ(47,"input",26),Z.YNc(48,ht,2,0,"div",12),Z.qZA(),Z.TgZ(49,"div",8),Z.TgZ(50,"label",27),Z._uU(51,"Price"),Z.qZA(),Z._UZ(52,"input",28),Z.YNc(53,_t,2,0,"div",12),Z.qZA(),Z.qZA(),Z.TgZ(54,"div",29),Z.TgZ(55,"label",30),Z._uU(56,"Description"),Z.qZA(),Z.TgZ(57,"div",8),Z._UZ(58,"textarea",31),Z.YNc(59,bt,2,0,"div",12),Z.qZA(),Z.qZA(),Z.TgZ(60,"div",32),Z._UZ(61,"input",33),Z._UZ(62,"input",34),Z._UZ(63,"input",35),Z._UZ(64,"input",36),Z.qZA(),Z.TgZ(65,"div",32),Z.TgZ(66,"span"),Z._uU(67,"Smoking"),Z.qZA(),Z.TgZ(68,"span"),Z._uU(69,"Eating"),Z.qZA(),Z.TgZ(70,"span"),Z._uU(71,"Drinking"),Z.qZA(),Z.TgZ(72,"span"),Z._uU(73,"Climatic"),Z.qZA(),Z.qZA(),Z.TgZ(74,"button",37),Z._uU(75,"Submit"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=n.ngIf,e=Z.oxw();let i;Z.xp6(5),Z.Q6J("formGroup",e.form),Z.xp6(6),Z.ekj("invalid",e.validateField("startPoint")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("startPoint")),Z.xp6(5),Z.ekj("invalid",e.validateField("endPoint")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("endPoint")),Z.xp6(6),Z.ekj("invalid",e.validateField("date")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("date")),Z.xp6(5),Z.ekj("invalid",e.validateField("time")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("time")),Z.xp6(5),Z.Q6J("currentImage",null==t?null:t.carImage),Z.xp6(1),Z.Q6J("ngIf",null==(i=e.form.get("carImage"))||null==i.errors?null:i.errors.invalid),Z.xp6(4),Z.ekj("invalid",e.validateField("carBrand")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("carBrand")),Z.xp6(5),Z.ekj("invalid",e.validateField("seats")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("seats")),Z.xp6(4),Z.ekj("invalid",e.validateField("price")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("price")),Z.xp6(5),Z.ekj("invalid",e.validateField("description")),Z.xp6(1),Z.Q6J("ngIf",e.validateField("description")),Z.xp6(15),Z.Q6J("disabled",e.form.invalid)}}let xt=(()=>{class t{constructor(t,n,e,i,o){this.tripService=t,this.activatedRoute=n,this.fb=e,this.router=i,this.store=o,this.trip$=this.tripService.trip$,this.isLoading$=this.store.select(t=>t.trip.update.isLoading),this.errorMessage$=this.store.select(t=>t.trip.update.errorMessage),this.tripService.loadTrip(this.activatedRoute.snapshot.params.tripId).subscribe(({trip:t})=>{this.form.patchValue(t),this.store.dispatch(s({isLoading:!1}))}),this.form=this.fb.group({startPoint:["",[M.kI.required,M.kI.minLength(4)]],endPoint:["",[M.kI.required,M.kI.minLength(4)]],date:["",[M.kI.required]],time:["",[M.kI.required]],carImage:["",[M.kI.required,M.kI.pattern(/^https?:\/\//)]],carBrand:["",[M.kI.required,M.kI.minLength(4)]],seats:["",[M.kI.required,M.kI.min(0),M.kI.max(4)]],price:["",[M.kI.required,M.kI.min(1),M.kI.max(50)]],description:["",[M.kI.required,M.kI.minLength(10)]],smoking:[""],eating:[""],drinking:[""],climatic:[""]})}validateField(t){var n,e;return(null===(n=this.form.get(t))||void 0===n?void 0:n.touched)&&(null===(e=this.form.get(t))||void 0===e?void 0:e.errors)}getImageUrl(t){if(this.store.dispatch(d({message:""})),null==t?void 0:t.message)return this.store.dispatch(d({message:null==t?void 0:t.message})),void this.form.controls.carImage.setErrors({invalid:!0});this.form.controls.carImage.setValue(t.imageUrl)}submitHandler(t){this.store.dispatch(d({message:""})),this.store.dispatch(s({isLoading:!0})),this.tripService.editTrip(this.form.value,t).subscribe(n=>{this.store.dispatch(s({isLoading:!1})),this.router.navigate([`/trip/detail/${t}`])},t=>{this.store.dispatch(d({message:t.error.message||t.message})),this.store.dispatch(s({isLoading:!1}))})}}return t.\u0275fac=function(n){return new(n||t)(Z.Y36(P),Z.Y36(O.gz),Z.Y36(M.qu),Z.Y36(O.F0),Z.Y36(r.yh))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-edit"]],decls:6,vars:9,consts:[[3,"errorMessage"],["class","main-view",4,"ngIf"],["id","edit-trip-page",4,"ngIf"],[1,"main-view"],["id","edit-trip-page"],[1,"container","edit"],[3,"formGroup","ngSubmit"],[1,"form-group","edit-input"],[1,"inline"],["for","startPoint"],[1,"fas","fa-map-marker-alt"],["type","text","formControlName","startPoint","id","startPoint","placeholder","Sofia",1,"form-control-2"],["class","error",4,"ngIf"],["for","endPoint"],["type","text","formControlName","endPoint","id","endPoint","placeholder","Svilengrad",1,"form-control-2"],["for","date"],[1,"far","fa-calendar-alt"],["type","date","formControlName","date","name","date","id","date","placeholder","01 July 2021",1,"form-control-2"],["for","time"],[1,"far","fa-clock"],["type","time","formControlName","time","name","time","id","time","placeholder","19:00 PM",1,"form-control-2"],["for","carImage"],[3,"currentImage","imageUrl"],["for","carBrand"],["type","text","formControlName","carBrand","name","carBrand","id","carBrand","placeholder","Dacia Sandero",1,"form-control-2"],["for","seats"],["type","text","formControlName","seats","name","seats","id","seats","placeholder","4",1,"form-control-2"],["for","price"],["type","text","formControlName","price","name","price","id","price","placeholder","25",1,"form-control-2"],[1,"form-group"],["for","description"],["formControlName","description","id","description","placeholder","Information about the trip",1,"form-control"],[1,"form-group","extras"],["type","checkbox","id","smoking","formControlName","smoking",1,"form-control-2"],["type","checkbox","id","eating","formControlName","eating",1,"form-control-2"],["type","checkbox","id","drinking","formControlName","drinking",1,"form-control-2"],["type","checkbox","id","climatic","formControlName","climatic",1,"form-control-2"],[1,"btn","btn-primary",3,"disabled"],[1,"error"]],template:function(t,n){1&t&&(Z._UZ(0,"app-error",0),Z.ALo(1,"async"),Z.YNc(2,dt,1,0,"app-loader",1),Z.ALo(3,"async"),Z.YNc(4,Zt,76,28,"section",2),Z.ALo(5,"async")),2&t&&(Z.Q6J("errorMessage",Z.lcZ(1,3,n.errorMessage$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(3,5,n.isLoading$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(5,7,n.trip$)))},directives:[T.q,i.O5,k.R,M._Y,M.JL,M.sg,M.Fj,M.JJ,M.u,q.a,M.Wl],pipes:[i.Ov],styles:["#edit-trip-page[_ngcontent-%COMP%]{padding:20px}.container[_ngcontent-%COMP%]{width:70%;padding-bottom:1rem!important}.edit[_ngcontent-%COMP%]{background:#00000080;background:#665e5e80}.container[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{text-align:center}.edit-label[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.edit-input[_ngcontent-%COMP%]{display:flex;justify-content:space-between}label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:.5rem;font-size:20px}i[_ngcontent-%COMP%]{color:#0578b9}input.form-control[_ngcontent-%COMP%], input.form-control-2[_ngcontent-%COMP%], textarea.form-control[_ngcontent-%COMP%]{background:#00000080;color:#fff;border:none;outline:none}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;border-radius:4px;margin-right:2px;filter:invert(1)}.form-control-2[_ngcontent-%COMP%]{text-align:center;display:block;width:95%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{background:#0009}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.edit[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%], .offer-trip[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{width:100%;height:90px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}textarea[_ngcontent-%COMP%], textarea.form-control[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]:disabled{padding:5px 10px;text-align:center;border-top-left-radius:20px;border-top-right-radius:20px;word-wrap:break-word}.inline[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative;font-size:.95rem}input.form-control-2[_ngcontent-%COMP%], textarea.form-control[_ngcontent-%COMP%]{border:1px solid #ccc}input.invalid[_ngcontent-%COMP%], textarea.invalid[_ngcontent-%COMP%]{border:1px solid #eb4b19}button[_ngcontent-%COMP%]:disabled{background:#00000080;cursor:not-allowed}.extras[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:1rem;color:#fff}INPUT[type=checkbox][_ngcontent-%COMP%]:focus{outline:1px solid #0003}INPUT[type=checkbox][_ngcontent-%COMP%]{border-radius:2px;appearance:none;-webkit-appearance:none;-moz-appearance:none;width:50px;height:50px;cursor:pointer;position:relative;top:5px}INPUT[type=checkbox][_ngcontent-%COMP%]:checked{background-image:url(Checkmark.svg.b05811829509e7f60883.png);background-size:50px}INPUT[type=checkbox][_ngcontent-%COMP%]:checked, input[type=checkbox][_ngcontent-%COMP%]:not(:checked){background-repeat:no-repeat;background-position:50%;border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:not(:checked){background-image:url(not-Checkmark.svg.d40f49a46552019109df.png);background-size:35px}@media (max-width:700px){.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;margin-top:20px}.edit-input[_ngcontent-%COMP%]{flex-wrap:wrap}.form-control-2[_ngcontent-%COMP%]{width:100%}.extras[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:1rem}}"]}),t})();var Pt=e(3190);const Ot=function(t){return["/trip/detail/",t]};let Ct=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-trip"]],inputs:{trip:"trip"},decls:29,vars:9,consts:[[1,"card","h-100"],["alt","car-img",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"fas","fa-route"],[1,"mt-4","card-info"],[1,"far","fa-calendar-alt"],[1,"far","fa-clock"],[1,"mt-4"],[1,"fas","fa-hand-holding-usd"],[1,"card-footer"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,n){1&t&&(Z.TgZ(0,"div",0),Z._UZ(1,"img",1),Z.TgZ(2,"div",2),Z.TgZ(3,"h5",3),Z._UZ(4,"i",4),Z.TgZ(5,"span"),Z._uU(6),Z.qZA(),Z._uU(7," - "),Z.TgZ(8,"span"),Z._uU(9),Z.qZA(),Z.qZA(),Z.TgZ(10,"h5",5),Z._UZ(11,"i",6),Z._uU(12,"Date: "),Z.TgZ(13,"span"),Z._uU(14),Z.qZA(),Z.qZA(),Z.TgZ(15,"h5",5),Z._UZ(16,"i",7),Z._uU(17,"Time: "),Z.TgZ(18,"span"),Z._uU(19),Z.qZA(),Z.qZA(),Z.TgZ(20,"h5",8),Z._UZ(21,"i",9),Z._uU(22,"Price: "),Z.TgZ(23,"span"),Z._uU(24),Z.qZA(),Z._uU(25," BGN"),Z.qZA(),Z.qZA(),Z.TgZ(26,"div",10),Z.TgZ(27,"a",11),Z._uU(28,"Details"),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(1),Z.Q6J("src",null==n.trip?null:n.trip.carImage,Z.LSH),Z.xp6(5),Z.Oqu(null==n.trip?null:n.trip.startPoint),Z.xp6(3),Z.Oqu(null==n.trip?null:n.trip.endPoint),Z.xp6(5),Z.Oqu(null==n.trip?null:n.trip.date),Z.xp6(5),Z.Oqu(null==n.trip?null:n.trip.time),Z.xp6(5),Z.Oqu(null==n.trip?null:n.trip.price),Z.xp6(3),Z.Q6J("routerLink",Z.VKq(7,Ot,null==n.trip?null:n.trip._id)))},directives:[O.yS],styles:[".card.h-100[_ngcontent-%COMP%]{transition:all .2s ease-in-out;width:270px;border:none;color:#fff;background:#0009}.h-100[_ngcontent-%COMP%]{height:100%!important}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:initial;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}img.card-img-top[_ngcontent-%COMP%]{height:170px}.card-img-top[_ngcontent-%COMP%]{height:200px;width:100%;border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}.card-body[_ngcontent-%COMP%]{text-align:left;flex:1 1 auto;padding:1.25rem}.card-title[_ngcontent-%COMP%]{margin-bottom:.75rem}.h5[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-size:1.25rem}.card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:5px}.fa[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{font-weight:900}.fa[_ngcontent-%COMP%], .far[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{font-family:Font Awesome\\ 5 Free}.fa[_ngcontent-%COMP%], .fab[_ngcontent-%COMP%], .fad[_ngcontent-%COMP%], .fal[_ngcontent-%COMP%], .far[_ngcontent-%COMP%], .fas[_ngcontent-%COMP%]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-feature-settings:normal;font-variant:normal;text-rendering:auto;line-height:1}i[_ngcontent-%COMP%]{color:#0578b9}.card-footer[_ngcontent-%COMP%]:last-child{border-radius:0 0 calc(.25rem - 1px) calc(.25rem - 1px)}.card-footer[_ngcontent-%COMP%]{padding:.75rem 1.25rem;background-color:#00000008;border-top:1px solid #ccc}.card.h-100[_ngcontent-%COMP%]:hover{cursor:grab;box-shadow:0 -2px 20px -1px #64c3fff5,inset -14px -14px 30px -13px #0000008c;transform:scale(1.05)}h5.mt-4[_ngcontent-%COMP%]{font-size:1rem;margin-top:0!important}"]}),t})();function Mt(t,n){1&t&&Z._UZ(0,"app-trip",1),2&t&&Z.Q6J("trip",n.$implicit)}let vt=(()=>{class t{constructor(){this.trips=[]}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-trip-list"]],inputs:{trips:"trips"},decls:1,vars:1,consts:[["class","col-lg-4 col-md-6 mb-4",3,"trip",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","mb-4",3,"trip"]],template:function(t,n){1&t&&Z.YNc(0,Mt,1,1,"app-trip",0),2&t&&Z.Q6J("ngForOf",n.trips)},directives:[i.sg,Ct],styles:[".mb-4[_ngcontent-%COMP%], .my-4[_ngcontent-%COMP%]{margin-bottom:1.5rem!important}.col-lg-4[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .mb-4[_ngcontent-%COMP%]{position:relative;min-height:1px;margin:auto}@media (min-width:768px){.col-md-6[_ngcontent-%COMP%]{flex:0 0 50%}}@media (min-width:992px){.col-lg-4[_ngcontent-%COMP%]{flex:0 0 20%}}"]}),t})();var Tt=e(5748);function qt(t,n){1&t&&Z._UZ(0,"app-loader")}const kt=function(){return[]};function At(t,n){if(1&t&&(Z.TgZ(0,"div"),Z._UZ(1,"app-trip-list",7),Z.ALo(2,"async"),Z._UZ(3,"app-pagination",8),Z.ALo(4,"async"),Z.ALo(5,"async"),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(1),Z.Q6J("trips",Z.lcZ(2,5,t.trips$)||Z.DdM(11,kt)),Z.xp6(2),Z.Q6J("limit",4)("baseUrl","/trip/list")("count",Z.lcZ(4,7,t.count$)||0)("page",Z.lcZ(5,9,t.page$)||1)}}function yt(t,n){1&t&&(Z.TgZ(0,"div",9),Z._UZ(1,"img",10),Z.TgZ(2,"p",5),Z._uU(3,"Hitchhiker time..."),Z.qZA(),Z.qZA())}const wt=O.Bz.forChild([{path:"list",component:(()=>{class t{constructor(t,n,e){this.tripService=t,this.activatedRoute=n,this.store=e,this.trips$=this.tripService.trips$,this.count$=this.tripService.count$,this.isLoading$=this.store.select(t=>t.trip.list.isLoading),this.errorMessage$=this.store.select(t=>t.trip.list.errorMessage),this.page$=this.store.select(t=>t.trip.list.page),this.activatedRoute.queryParams.pipe((0,o.b)(({page:t})=>{this.store.dispatch(f({isLoading:!0})),this.store.dispatch(b({page:+t}))}),(0,Pt.w)(t=>this.tripService.loadTrips(t))).subscribe(()=>this.store.dispatch(f({isLoading:!1})))}}return t.\u0275fac=function(n){return new(n||t)(Z.Y36(P),Z.Y36(O.gz),Z.Y36(r.yh))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-shared-trips"]],decls:17,vars:12,consts:[[3,"errorMessage"],[4,"ngIf"],["id","shared-trips-page"],[1,"container","shared-trip-page"],[1,"trip"],[1,"lead"],["class","no-trips",4,"ngIf"],[1,"row","text-center",3,"trips"],[1,"user",3,"limit","baseUrl","count","page"],[1,"no-trips"],["src","https://www.stagweb.co.uk/img/activities/big/sexyhitchhiker1.jpg"]],template:function(t,n){if(1&t&&(Z._UZ(0,"app-error",0),Z.ALo(1,"async"),Z.YNc(2,qt,1,0,"app-loader",1),Z.ALo(3,"async"),Z.TgZ(4,"section",2),Z.TgZ(5,"div",3),Z.TgZ(6,"header",4),Z.TgZ(7,"h1"),Z._uU(8,"Welcome Sharetripers!"),Z.qZA(),Z.TgZ(9,"p",5),Z._uU(10,"Sharedtrip is the best way to road across the country."),Z.qZA(),Z.TgZ(11,"p",5),Z._uU(12,"Find yours Sharedtrip's buddies, when you share with us yours trip plans and let the exploration begin!"),Z.qZA(),Z.qZA(),Z.YNc(13,At,6,12,"div",1),Z.ALo(14,"async"),Z.YNc(15,yt,4,0,"div",6),Z.ALo(16,"async"),Z.qZA(),Z.qZA()),2&t){let t,e;Z.Q6J("errorMessage",Z.lcZ(1,4,n.errorMessage$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(3,6,n.isLoading$)),Z.xp6(11),Z.Q6J("ngIf",null==(t=Z.lcZ(14,8,n.trips$))?null:t.length),Z.xp6(2),Z.Q6J("ngIf",0===(null==(e=Z.lcZ(16,10,n.trips$))?null:e.length))}},directives:[T.q,i.O5,k.R,vt,Tt.Q],pipes:[i.Ov],styles:["#shared-trips-page[_ngcontent-%COMP%]{padding:20px}.shared-trip-page[_ngcontent-%COMP%]{background:#665e5e80;width:100%;padding-bottom:1rem!important;min-height:525px}.trip[_ngcontent-%COMP%]{text-align:center;border-bottom-left-radius:20px;border-bottom-right-radius:20px;color:#fff}.trip[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-bottom:10px;border-bottom:1px solid #b3a0a0}.trip[_ngcontent-%COMP%]   p.lead[_ngcontent-%COMP%]{margin-bottom:0}.lead[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem}.row[_ngcontent-%COMP%]{justify-content:center;margin-top:40px}.text-center[_ngcontent-%COMP%]{text-align:center!important}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.no-trips[_ngcontent-%COMP%]{width:100%;margin-top:50px;text-align:center}.no-trips[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.95;margin-bottom:10px;vertical-align:middle;border-style:none}.no-trips[_ngcontent-%COMP%]   p.lead[_ngcontent-%COMP%]{color:#fff;width:100%;text-align:center;font-size:30px;font-style:italic}@media (min-width:576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width:768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width:992px){.container[_ngcontent-%COMP%]{max-width:1300px}}@media (max-width:576px){.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;margin-top:20px}}"]}),t})()},{path:"detail/:tripId",component:st},{path:"create",component:Y,data:{isLogged:!0}},{path:"edit/:tripId",component:xt,canActivate:[C.d],data:{isLogged:!0}}]);var Ut=e(4466),It=e(7019);const Lt={create:(0,r.Lq)({isLoading:!1,errorMessage:null},(0,r.on)(a,(t,n)=>Object.assign(Object.assign({},t),{isLoading:n.isLoading})),(0,r.on)(c,(t,n)=>Object.assign(Object.assign({},t),{errorMessage:n.message}))),update:(0,r.Lq)({isLoading:!0,errorMessage:null},(0,r.on)(s,(t,n)=>Object.assign(Object.assign({},t),{isLoading:n.isLoading})),(0,r.on)(d,(t,n)=>Object.assign(Object.assign({},t),{errorMessage:n.message}))),detail:(0,r.Lq)({trip:null,isLoading:!0,errorMessage:null,info:null},(0,r.on)(g,(t,n)=>Object.assign(Object.assign({},t),{trip:n.trip})),(0,r.on)(p,(t,n)=>Object.assign(Object.assign({},t),{info:n.info})),(0,r.on)(l,(t,n)=>Object.assign(Object.assign({},t),{isLoading:n.isLoading})),(0,r.on)(u,(t,n)=>Object.assign(Object.assign({},t),{errorMessage:n.message}))),list:(0,r.Lq)({trips:null,isLoading:!0,errorMessage:null,count:0,page:1},(0,r.on)(f,(t,n)=>Object.assign(Object.assign({},t),{isLoading:n.isLoading})),(0,r.on)(m,(t,n)=>Object.assign(Object.assign({},t),{errorMessage:n.message})),(0,r.on)(h,(t,n)=>Object.assign(Object.assign({},t),{trips:n.trips})),(0,r.on)(_,(t,n)=>Object.assign(Object.assign({},t),{count:n.count})),(0,r.on)(b,(t,n)=>Object.assign(Object.assign({},t),{page:n.page})))};let Nt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({providers:[P],imports:[[It.I,i.ez,wt,M.u5,M.UX,Ut.m,x.JF,r.Aw.forFeature("trip",Lt)]]}),t})()}}]);